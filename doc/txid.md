
This document describes how to calculate the TXID for mvc.
For different TX version numbers there are different calculation methods.

# 1 . TX_VERSION < 10
```c
TX_HASH=SHA256(SHA256(RAW_HEX))
```

# 2 . TX_VERSION >= 10
```c
TXID=SHA256(SHA256(TX_VERSION | TX_LOCKTIME | TX_INS_COUNT | TX_OUTS_COUNT | TX_INS_HASH | TX_INS_SCRIPT_SIG_HASH | TX_OUTS_HASH ))
```
For example:
```c
rawHex="0a000000017a276fdd8a69166653076df799a65567043aee519aa8c4434c4ce5d7af5a2445000000006b483045022100975291fb5e9f77f530cb0526b6bde061cc30eb5b1acff3717dee543d77abc97e02203c4c0822c8f5382ea1fd888717781d2cb7009ac79df88469c903d0f8ba2b4e124121036a91519304b8232af54c554410385ef057d063c17df04e8e0984a5fc9aa9c712feffffff01409fdb215d0000001976a9148daf326bdf59dc78ca37a947755e6c8810b25fdd88ac589f0000"
```
The rawHex can be decoded as
```json
{
	"txid": "b9ba9aa57faacc08579c864d7068ceebf322bcc2c63d539235978cadaf63e499",
	"hash": "b9ba9aa57faacc08579c864d7068ceebf322bcc2c63d539235978cadaf63e499",
	"version": 10,
	"size": 192,
	"locktime": 40792,
	"vin": [{
		"txid": "45245aafd7e54c4c43c4a89a51ee3a046755a699f76d07536616698add6f277a",
		"vout": 0,
		"scriptSig": {
			"asm": "3045022100975291fb5e9f77f530cb0526b6bde061cc30eb5b1acff3717dee543d77abc97e02203c4c0822c8f5382ea1fd888717781d2cb7009ac79df88469c903d0f8ba2b4e12[ALL|FORKID] 036a91519304b8232af54c554410385ef057d063c17df04e8e0984a5fc9aa9c712",
			"hex": "483045022100975291fb5e9f77f530cb0526b6bde061cc30eb5b1acff3717dee543d77abc97e02203c4c0822c8f5382ea1fd888717781d2cb7009ac79df88469c903d0f8ba2b4e124121036a91519304b8232af54c554410385ef057d063c17df04e8e0984a5fc9aa9c712"
		},
		"sequence": 4294967294
	}],
	"vout": [{
		"value": 3999.99999808,
		"n": 0,
		"scriptPubKey": {
			"asm": "OP_DUP OP_HASH160 8daf326bdf59dc78ca37a947755e6c8810b25fdd OP_EQUALVERIFY OP_CHECKSIG",
			"hex": "76a9148daf326bdf59dc78ca37a947755e6c8810b25fdd88ac",
			"reqSigs": 1,
			"type": "pubkeyhash",
			"addresses": ["1DvA9wsvMhZLaA5vgy9xDgGZ18zoTzLeRQ"]
		}
	}],
	"hex": "0a000000017a276fdd8a69166653076df799a65567043aee519aa8c4434c4ce5d7af5a2445000000006b483045022100975291fb5e9f77f530cb0526b6bde061cc30eb5b1acff3717dee543d77abc97e02203c4c0822c8f5382ea1fd888717781d2cb7009ac79df88469c903d0f8ba2b4e124121036a91519304b8232af54c554410385ef057d063c17df04e8e0984a5fc9aa9c712feffffff01409fdb215d0000001976a9148daf326bdf59dc78ca37a947755e6c8810b25fdd88ac589f0000"
}
```

## 2.1 We can now get the following valuesï¼š
```c
TX_VERSION="0a000000"
```
```c
TX_LOCKTIME="589f0000"
```
```c
TX_INS_COUNT="01000000"
```
```c
TX_OUTS_COUNT="01000000"
```
## 2.2 Calculate the hash value of transaction inputs
```c
TX_INS_HASH=SHA256(PREVOUT_0 | SEQUENCE_0 | PREVOUT_1 | SEQUENCE_1 | ...| PREVOUT_n | SEQUENCE_n)
```
There is only one input in example transaction, so
```c
PREVOUT_0=TXID | N ="7a276fdd8a69166653076df799a65567043aee519aa8c4434c4ce5d7af5a244500000000"
```
```c
SEQUENCE_0="feffffff"
```
```c
TX_INS_HASH=SHA256(PREVOUT_0 | SEQUENCE_0 )
=SHA256("7a276fdd8a69166653076df799a65567043aee519aa8c4434c4ce5d7af5a244500000000feffffff")
="a28dd1ec57a13456a38e425482361c6534819dc0b47307ef337145f150e45efa"
```

## 2.3 Calculate the hash value of script sigs
```c
TX_INS_SCRIPT_SIG_HASH=SHA256(SHA256(SCRIPT_SIG_0) | SHA256(SCRIPT_SIG_0) | ... | SHA256(SCRIPT_SIG_n))
```
```c
SCRIPT_SIG_0="483045022100975291fb5e9f77f530cb0526b6bde061cc30eb5b1acff3717dee543d77abc97e02203c4c0822c8f5382ea1fd888717781d2cb7009ac79df88469c903d0f8ba2b4e124121036a91519304b8232af54c554410385ef057d063c17df04e8e0984a5fc9aa9c712"
```
```c
TX_INS_SCRIPT_SIG_HASH=SHA256(SHA256(SCRIPT_SIG_0))=SHA256(SHA256("483045022100975291fb5e9f77f530cb0526b6bde061cc30eb5b1acff3717dee543d77abc97e02203c4c0822c8f5382ea1fd888717781d2cb7009ac79df88469c903d0f8ba2b4e124121036a91519304b8232af54c554410385ef057d063c17df04e8e0984a5fc9aa9c712"))
="2de9febb1e532caa0b0cbf94d858bca62631cc3bfd235df384f3dd1bf677d7e5"
```
## 2.4 Calculate the hash value of transaction outputs
```c
TX_OUTS_HASH=SHA256(VALUE_0 | SCRIPT_PUBKEY_0 | VALUE_1 | SCRIPT_PUBKEY_1 | ... | VALUE_n | SCRIPT_PUBKEY_n)
```
```c
VALUE_0="409fdb215d000000"
SCRIPT_PUBKEY_0="76a9148daf326bdf59dc78ca37a947755e6c8810b25fdd88ac"
```
```c
TX_OUTS_HASH=SHA256(VALUE_0 | SCRIPT_PUBKEY_0)
=SHA256("409fdb215d00000076a9148daf326bdf59dc78ca37a947755e6c8810b25fdd88ac")
="94f0b7d85f5f062165747b84442b784b002e56928f70b8f1ff9c77be699ad2db"
```
## 2.5 Calculate the hash value of transaction hash
```c
TXID=SHA256(SHA256(TX_VERSION | TX_LOCKTIME | TX_INS_COUNT | TX_OUTS_COUNT | TX_INS_HASH | TX_INS_SCRIPT_SIG_HASH | TX_OUTS_HASH ))
=SHA256(SHA256("0a000000589f00000100000001000000a28dd1ec57a13456a38e425482361c6534819dc0b47307ef337145f150e45efa2de9febb1e532caa0b0cbf94d858bca62631cc3bfd235df384f3dd1bf677d7e594f0b7d85f5f062165747b84442b784b002e56928f70b8f1ff9c77be699ad2db"))
="99e463afad8c973592533dc6c2bc22f3ebce68704d869c5708ccaa7fa59abab9"
```
Convert the result to little-endian 
```c
TXID="b9ba9aa57faacc08579c864d7068ceebf322bcc2c63d539235978cadaf63e499"
```

To learn more about txid calculation, please read the code [here](https://github.com/mvc-labs/microvisionchain/blob/master/src/hash.h#L239-L274).
